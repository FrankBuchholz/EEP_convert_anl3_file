"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _defineProperty(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}!function s(h,r,_){function l(i,t){if(!r[i]){if(!h[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(a)return a(i,!0);var o=new Error("Cannot find module '"+i+"'");throw o.code="MODULE_NOT_FOUND",o}var n=r[i]={exports:{}};h[i][0].call(n.exports,function(t){return l(h[i][1][t]||t)},n,n.exports,s,h,r,_)}return r[i].exports}for(var a="function"==typeof require&&require,t=0;t<_.length;t++)l(_[t]);return l}({1:[function(t,i,e){window.ToolWindow=t("./lib/toolwindow").ToolWindow},{"./lib/toolwindow":4}],2:[function(t,i,e){var o={title:"Tool Window",closeButtonText:"âœ–",buttons:[{text:"Ok",clicked:function(){this.hide()}}],minWidth:200,minHeight:200,maxWidth:0,maxHeight:0,autoFitContent:!0,keepOnScreen:!0,width:350,height:200,minZIndex:1e3,top:void 0,left:void 0,resizeHandleSize:10,content:{type:"text",value:""},placement:null,relativeToElement:null,escapeCloses:!0,animated:!0,animationTime:1e3,animationOpacityStep:.1,boundingElement:null};i.exports={defaultOptions:o,alignments:{inside:"inside",outside:"outside",horizontalEdge:"horizontalEdge",verticalEdge:"verticalEdge"},positions:{auto:"auto",topLeft:"topLeft",topCenter:"topCenter",topRight:"topRight",centerLeft:"centerLeft",center:"center",centerRight:"centerRight",bottomLeft:"bottomLeft",bottomCenter:"bottomCenter",bottomRight:"bottomRight"}}},{}],3:[function(t,i,e){var o,n,s,h,r=t("./config").positions,_=(_defineProperty(o={},r.topLeft,function(t,i,e){return t(i.left-e.width,i.top-e.height)}),_defineProperty(o,r.topCenter,function(t,i,e){return t(i.left+(i.width-e.width)/2,i.top-e.height)}),_defineProperty(o,r.topRight,function(t,i,e){return t(i.right,i.top-e.height)}),_defineProperty(o,r.centerLeft,function(t,i,e){return t(i.left-e.width,i.top-(e.height-i.height)/2)}),_defineProperty(o,r.center,function(t,i,e){return t(i.left-(e.width-i.width)/2,i.top-(e.height-i.height)/2)}),_defineProperty(o,r.centerRight,function(t,i,e){return t(i.right,i.top-(e.height-i.height)/2)}),_defineProperty(o,r.bottomCenter,function(t,i,e){return t(i.left+(i.width-e.width)/2,i.bottom)}),o),l=(_defineProperty(n={},r.topLeft,function(t,i){return t(i.left,i.top)}),_defineProperty(n,r.topCenter,function(t,i,e){return t(i.left+(i.width-e.width)/2,i.top)}),_defineProperty(n,r.topRight,function(t,i,e){return t(i.left+i.width-e.width,i.top)}),_defineProperty(n,r.centerLeft,function(t,i,e){var o=i.top+(i.height-e.height)/2;return t(i.left,o)}),_defineProperty(n,r.center,function(t,i,e){return _[r.center](t,i,e)}),_defineProperty(n,r.centerRight,function(t,i,e){return t(i.left+i.width-e.width,i.top+(i.height-e.height)/2)}),_defineProperty(n,r.bottomLeft,function(t,i,e){var o=i.top+i.height-e.height;return t(i.left,o)}),_defineProperty(n,r.bottomCenter,function(t,i,e){return t(i.left+(i.width-e.width)/2,i.top+i.height-e.height)}),_defineProperty(n,r.bottomRight,function(t,i,e){return t(i.left+i.width-e.width,i.top+i.height-e.height)}),n),a=(_defineProperty(s={},r.topLeft,function(t,i,e){return t(i.left-e.width,i.top)}),_defineProperty(s,r.topCenter,function(t,i,e){return _[r.topCenter](t,i,e)}),_defineProperty(s,r.topRight,function(t,i){return t(i.left+i.width,i.top)}),_defineProperty(s,r.centerLeft,function(t,i,e){return t(i.left-e.width,i.top+i.height/2)}),_defineProperty(s,r.center,function(t,i,e){return _[r.center](t,i,e)}),_defineProperty(s,r.centerRight,function(t,i){return t(i.left+i.width,i.top+i.height/2)}),_defineProperty(s,r.bottomLeft,function(t,i,e){return t(i.left-e.width,i.top+i.height-e.height)}),_defineProperty(s,r.bottomCenter,function(t,i,e){return _[r.bottomCenter](t,i,e)}),_defineProperty(s,r.bottomRight,function(t,i,e){return t(i.left+i.width,i.top+i.height-e.height)}),s),d=(_defineProperty(h={},r.topLeft,function(t,i,e){var o=i.top-e.height;return t(i.left,o)}),_defineProperty(h,r.topCenter,function(t,i,e){return _[r.topCenter](t,i,e)}),_defineProperty(h,r.topRight,function(t,i,e){var o=i.top-e.height;return t(i.right-e.width,o)}),_defineProperty(h,r.centerLeft,function(t,i,e){var o=i.top-(e.height-i.height)/2;return t(i.left-e.width,o)}),_defineProperty(h,r.center,function(t,i,e){return _[r.center](t,i,e)}),_defineProperty(h,r.centerRight,function(t,i,e){var o=i.top-(e.height-i.height)/2;return t(i.right-e.width,o)}),_defineProperty(h,r.bottomLeft,function(t,i){return t(i.left,i.bottom)}),_defineProperty(h,r.bottomCenter,function(t,i,e){return _[r.bottomCenter](t,i,e)}),_defineProperty(h,r.bottomRight,function(t,i,e){return t(i.right-e.width,i.bottom)}),h);i.exports={inside:l,outside:_,horizontalEdge:a,verticalEdge:d}},{"./config":2}],4:[function(t,i,e){var o=t("./config"),n=o.defaultOptions,s=o.alignments,h=o.positions,f=t("./positioners"),r=1e3;function _(){var t=Array.from(arguments);"string"==typeof t[0]?t[0]="ToolWindow warning: "+t[0]:t.unshift("ToolWindow warning:"),console.warn.apply(console,t)}function l(i){i=i||{},Object.keys(i).forEach(function(t){void 0!==i[t]&&null!==i[t]||delete i[t]}),this._options=Object.assign({},n,i||{}),this._options.minZIndex>r&&(r=this._options.minZIndex),this._minW=Math.max(this._options.minWidth,64*+this._options.buttons.length+10*this._options.buttons.length-49),this._log("#buttons="+this._options.buttons.length+" minWidth="+this._options.minWidth+" _minW="+this._minW),this._minH=this._options.minHeight,this._options.width<this._minW&&(this._options.width=this._minW),this._options.height<this._minH&&(this._options.height=this._minH),this._resizePixel=this._options.resizeHandleSize,this._hasEventListeners=!!window.addEventListener,this._isDrag=!1,this._isResize=!1,this._isButton=!1,this._resizeMode="",this._initialPlacementDone=!1,this._raised=!1,this._options.boundingElement&&(this._boundingElement="string"==typeof this._options.boundingElement?document.querySelector(this._options.boundingElement):this._options.boundingElement),this._createDialogStructure(),this._bindMouseEvents(),this._shownCount=0}l.prototype={_log:function(t){window.__debug_toolwindow__&&console.log(t)},get title(){return this._options.title},set title(t){this._options.title=t},get content(){return this._options.content},set content(t){this._options.content=t},get _maxW(){return this._options.maxWidth<1?this._options.keepOnScreen?window.innerWidth:Number.MAX_SAFE_INTEGER:this._options.maxWidth},get _maxH(){return this._options.maxHeight<1?this._options.keepOnScreen?window.innerHeight:Number.MAX_SAFE_INTEGER:this._options.maxHeight},show:function(){var t=this,i=this._buttons[this._buttons.length-1];if(i&&i.focus(),this._dialog.style.display="block",this._dialog.style.opacity="0",!this._initialPlacementDone){var e=void 0===this._options.left?(window.innerWidth-this._options.width)/2:this._options.left,o=void 0===this._options.top?(window.innerHeight-this._options.height)/2:this._options.top;this._initialPlacementDone=!0,this.moveTo(e,o,this._options.width,this._options.height)}this.refresh(),0===this._shownCount&&this._options.autoFitContent?this.fitContent().then(function(){t._doShow()}):this._doShow(),this._shownCount++,window.setTimeout(function(){return t._raiseDialog()},0)},_doShow:function(){this._options.animated?this._animateShow():(this._dialog.style.display="block",this._dialog.style.opacity="1")},hide:function(){this._raised=!1,this._options.animated?this._animateClose():this._dialog.style.display="none"},_animateClose:function(){this._animateOpacity(1,0)},_animateShow:function(){this._animateOpacity(0,1)},_animateOpacity:function(i,e){var o=this;this._dialog.style.display="block",this._dialog.style.opacity=i.toString();var n=0===e?"none":"block",s=(e<i?-1:1)*(this._options.animationOpacityStep||.1),t=(this._options.animationTime||1e3)/40,h=window.setInterval(function(){var t=parseFloat(o._dialog.style.opacity)+s;if(e<i&&t<=e||i<e&&e<=t)return o._dialog.style.display=n,o._dialog.style.opacity=e.toString(),window.clearInterval(h);o._dialog.style.opacity=t.toString()},t)},refresh:function(){var i=this;if(this._options.title&&this._setTitle(this._options.title),this._options.content)switch(this._options.content.type){case"text":this._fetchContent(function(t){return i._setText(t)});break;case"html":case"text/html":this._fetchContent(function(t){return i._setHTML(t)});break;case"url":var e=this._dialogContent.querySelector("iframe");e||(this._setText(null),e=this._mkEl("iframe","content-iframe",this._dialogContent)),this._fetchContent(function(t){e.src===t?(e.src="about:blank",window.setTimeout(function(){e.src=t},0)):e.src=t});break;default:throw new Error("Content type not handled: "+(this._options.content.type||"(not set)"))}else this._setText("No content defined")},get dimensions(){var e=this,t=["top","left","width","height"].reduce(function(t,i){return t[i]=parseInt(e._dialog.style[i]),t},{});return t.right=t.left+t.width,t.bottom=t.top+t.height,t},fitContent:function(){var _={self:this,rounds:0,lastDimensions:this.dimensions};return new Promise(function(r){window.setTimeout(function t(){_.self._shownCount<2&&_.self.moveToConfiguredStartPosition();var i=_.self.dimensions;if(0<_.rounds&&i.width===_.lastDimensions.width&&i.height===_.lastDimensions.height)return r();_.rounds++;var e=_.self._dialogContent.scrollHeight-_.self._dialogContent.clientHeight;if(0<e){var o=Math.min(e,10),n=Math.round(o/2);_.self.moveTo("-"+n,"-"+n,"+"+o,"+"+o)}else if(e<0){var s=Math.max(e,-10),h=Math.abs(Math.round(s/2));_.self.moveTo("-"+h,"-"+h,""+s,""+s)}_.lastDimensions=i,window.setTimeout(t,1)},1)})},moveToConfiguredStartPosition:function(){if(!this._isAutoPosition&&(this._relativeElement=this._relativeElement||this._findRelativeElement(),this._relativeElement)){var t=this._relativeElement;this._positionWith(t,this._options.placement)}},get _isAutoPosition(){var t=(this._options.placement||"").trim().toLowerCase();return!t||-1<t.split(/[,|;\s]/).indexOf("auto")},_positionWith:function(t,i){var e=this.moveUnconstrained.bind(this),o=!0,n=!1,s=void 0;try{for(var h,r=i.split("|")[Symbol.iterator]();!(o=(h=r.next()).done);o=!0){var _=h.value,l=this._grokPlacement(_),a=l.align,d=l.position;if(!d||!a)return;var u=f[a];if(!u)return console.error("alignment not understood: "+a);var c=u[d];if(!c)return console.error("position not understood for alignment '"+a+"': '"+d+"'");if(c(e,t.getBoundingClientRect(),this._dialog.getBoundingClientRect())&&this._withinView())return}}catch(t){n=!0,s=t}finally{try{!o&&r.return&&r.return()}finally{if(n)throw s}}},_grokPlacement:function(t){var i=t.split(",");return 2!==i.length?(console.error("Bad placement: '"+t),null):-1<Object.keys(s).indexOf(i[0])?{align:i[0],position:i[1]}:{align:i[1],position:i[0]}},_withinView:function(){var t=document.documentElement,i=t.scrollLeft,e=t.scrollTop,o=i+(t.clientWidth+t.scrollLeft),n=e+(t.clientHeight+t.scrollTop),s=this._dialog.getBoundingClientRect();return s.top>=e&&s.left>=i&&s.right<=o&&s.bottom<=n},_findRelativeElement:function(){var t=this._options.relativeToElement;return t?"string"==typeof t?this._tryFindElementBySelector(t):t:null},_tryFindElementBySelector:function(t){if(!t)return null;var i=document.querySelectorAll(t);return 0===i.length?_("unable to find any element with selector '"+t+"'"):1<i.length&&_("multiple elements matched by selector '"+t+"' (first will be used)"),i[0]},moveTo:function(t,i,e,o){return this._moveTo(t,i,e,o),this.constrain(),this._validatePosition(t,i,e,o)},moveUnconstrained:function(t,i,e,o){return this._moveTo(t,i,e,o),this._validatePosition(t,i,e,o)},_validatePosition:function(t,i,e,o){var n=this._dialog.getBoundingClientRect();return this._closeEnough(t,n.left)&&this._closeEnough(i,n.top)&&this._closeEnough(e,n.width)&&this._closeEnough(o,n.height)},_closeEnough:function(t,i){return void 0===t||void 0===i||null===t||null===i||Math.abs(t-i)<1},_moveTo:function(t,i,e,o){null!=t&&((t=this._grokRelative(t,this._dialog.style.left))<0&&(t=0),t=Math.min(t,window.innerWidth-5),this._dialog.style.left=this._px(t)),null!=i&&((i=this._grokRelative(i,this._dialog.style.top))<0&&(i=0),this._dialog.style.top=this._px(i)),this._resizeTo(e,o)},get boundingRect(){return this._boundingElement?this._boundingElement.getBoundingClientRect():this._makeDocumentElementBoundingRect()},_makeDocumentElementBoundingRect:function(){var t=document.documentElement.getBoundingClientRect(),i=t.width,e=t.height;return t.height>window.innerHeight&&(i-=5),{top:0,left:0,width:i,height:e,right:i,bottom:e}},constrain:function(){if(this._options.keepOnScreen){var t=this.dimensions,i=this.boundingRect,e=null,o=null,n=null,s=null;t.width>i.width&&(e=i.width),t.height>i.height&&(o=i.height),t.left<i.left&&(n=i.left),t.top<i.top&&(s=i.top),t.right>i.right&&(n=Math.floor(i.right)-Math.ceil(t.width)),t.bottom>i.bottom&&(s=Math.floor(i.bottom)-Math.ceil(t.height)),null===e&&null===o&&null===n&&null===s||this._moveTo(n,s,e,o)}},resizeTo:function(t,i){this._resizeTo(t,i),this.constrain()},_resizeTo:function(t,i){null!=t&&((t=this._grokRelative(t,this._dialog.style.width))>this._maxW&&(t=this._maxW),this._dialog.style.width=this._px(t)),null!=i&&((i=this._grokRelative(i,this._dialog.style.height))>this._maxH&&(i=this._maxH),this._dialog.style.height=this._px(i)),this._fitContentCoverOverContent()},_grokRelative:function(t,i){if("string"!=typeof t)return t;var e=parseInt(t),o=parseInt(i);return isNaN(o)&&(o=0),o+e},_setTitle:function(t){this._dialogTitleText.innerHTML="","string"!=typeof t&&(t=(t||"").toString()),this._dialogTitleText.innerText=t},_setText:function(t){this._dialogContent.innerHTML="","string"!=typeof t&&(t=(t||"").toString()),this._dialogContent.innerText=t},_setHTML:function(t){this._dialogContent.innerText="",this._looksLikeAnHTMLElement(t)?this._dialogContent.appendChild(t):this._dialogContent.innerHTML=t},_looksLikeAnHTMLElement:function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&void 0!==t.tagName&&"function"==typeof t.getAttribute},_looksLikeAPromise:function(t){return t&&"function"==typeof t.then},_fetchContent:function(i){if("function"==typeof this._options.content.value){var t=this._options.content.value();this._looksLikeAPromise(t)?t.then(function(t){i(t)}):i(t)}else i(this._options.content.value)},_createDialog:function(){var i=this;this._dialog=this._mkDiv("dialog",document.body),this._dialog.style.width=this._px(this._options.width),this._dialog.style.height=this._px(this._options.height),this._dialog.style.display="none",this._dialog.style.zIndex=(++r).toString(),document.addEventListener("click",function(){i._raised=!1}),this._options.escapeCloses&&(this._dialog.addEventListener("click",function(t){if(!t.target.closest(".dialog>.content"))return i._suppressEvent(t)}),document.addEventListener("keydown",function(t){i._dialog&&i._dialog.parentElement&&i._raised&&"Escape"===t.key&&i.hide()}))},_createTitlebar:function(){this._dialogTitle=this._mkDiv("titlebar",this._dialog),this._closeButton=this._mkEl("button","close",this._dialogTitle),this._closeButton.innerText=this._options.closeButtonText,this._closeButton.addEventListener("click",this.hide.bind(this)),this._dialogTitleText=this._mkEl("span","",this._dialogTitle),this._dialogTitleText.innerText=this._options.title},_createContentArea:function(){this._dialogContent=this._mkDiv("content",this._dialog),this._coverContentDuringMoveAndResize="url"===this._options.content.type},_createButtonBar:function(){var s=this;if(0===this._options.buttons.length)return this._dialogContent.classList.add("no-buttons"),void(this._buttons=[]);this._buttonBar=this._mkDiv("button-bar",this._dialog),this._buttons=this._options.buttons.map(function(o){var n=s._mkEl("button","dialog-button",s._buttonBar);n.innerText=o.text,o.clicked&&n.addEventListener("click",function(t){var i=!(n.disabled=!0);try{var e=o.clicked.apply(s,t);s._looksLikeAPromise(e)&&(i=!0,e.then(function(){n.disabled=!1}).catch(function(t){console.error(t),n.disabled=!1}))}catch(t){console.error(t)}n.disabled=i})})},_createGrippers:function(){this._mkDiv(["gripper","left"],this._dialog),this._mkDiv(["gripper","right"],this._dialog)},_createDialogStructure:function(){this._createDialog(),this._createTitlebar(),this._createContentArea(),this._createButtonBar(),this._createGrippers()},_bindMouseEvents:function(){this._setDialogContentSizing(),this._addEvent(this._dialog,"mousedown",this._onMouseDown.bind(this)),this._addEvent(document,"mousemove",this._onMouseMove.bind(this)),this._addEvent(document,"mouseup",this._onMouseUp.bind(this))},_raiseDialog:function(){this._dialog.style.zIndex=(++r).toString(),this._raised=!0},_px:function(t){return(t=(t||"0")+"").match(/px$/)?t:t+"px"},_mkDiv:function(t,i){return this._mkEl("div",t,i)},_mkEl:function(t,i,e){var o=document.createElement(t);return i&&(Array.isArray(i)||(i=[i]),i.forEach(function(t){o.classList.add(t)})),e&&e.appendChild(o),o},_addEvent:function(t,i,e){null!=t&&void 0!==(void 0===t?"undefined":_typeof(t))&&(this._hasEventListeners?t.addEventListener(i,e,!1):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e)},_suppressEvent:function(t){if(t.stopPropagation&&t.stopPropagation(),!t.preventDefault)return t.returnValue=!1;t.preventDefault()},_logOnMouseDown:function(){this._log("_onMouseDown: "+(this._isDrag?" Drag":"")+(this._isResize?" resize=":"")+this._resizeMode+(this._isButton?" Button":""))},_onMouseDown:function(t){if(this._raiseDialog(),(t=t||window.event)&&t.target&&(this._resizeMode||!t.target.closest(".dialog>.content"))){var i=this._getOffset(this._dialog);return this._maxX=Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth),this._maxY=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight),i.right>this._maxX&&(this._maxX=i.right),i.bottom>this._maxY&&(this._maxY=i.bottom),this._startX=t.pageX,this._startY=t.pageY,this._startW=this._dialog.clientWidth,this._startH=this._dialog.clientHeight,this._leftPos=i.left,this._topPos=i.top,this._resizeMode||t.target!==this._dialogTitle&&t.target!==this._dialogTitleText?this._resizeMode&&(this._isResize=!0):(this._setCursor("move"),this._isDrag=!0),this._coverContentDuringMoveAndResize&&this._createContentCover(),this._logOnMouseDown(),this._suppressEvent(t)}},_createContentCover:function(){this._contentCover&&this._contentCover.remove(),this._contentCover=this._mkDiv(void 0,this._dialog),this._fitContentCoverOverContent()},_fitContentCoverOverContent:function(){if(this._contentCover){var t=this._contentCover.style,i=this._dialogContent.getBoundingClientRect(),e=this._dialogTitle.getBoundingClientRect();t.width=this._px(i.width),t.height=this._px(i.height),t.top=this._px(e.height),t.left="0px",t.position="absolute",t.background="transparent",t.zIndex="9999"}},_removeContentCover:function(){this._contentCover&&this._contentCover.remove(),this._contentCover=void 0},_doDrag:function(t){var i=this._startX-t.pageX,e=this._startY-t.pageY,o=this._leftPos-i,n=this._topPos-e,s=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),h=Math.max(document.body.scrollTop,document.documentElement.scrollTop);i<0&&o+this._startW>this._maxX&&(o=this._maxX-this._startW),0<i&&o<0&&(o=0),e<0&&n+this._startH>this._maxY&&(n=this._maxY-this._startH),0<e&&n<0&&(n=0),this.moveTo(o,n),t.clientY>window.innerHeight-32?h+=32:t.clientY<32&&(h-=32),t.clientX>window.innerWidth-32?s+=32:t.clientX<32&&(s-=32),n+this._startH===this._maxY?h=this._maxY-window.innerHeight+20:0===n&&(h=0),o+this._startW===this._maxX?s=this._maxX-window.innerWidth+20:0===o&&(s=0),this._startH>window.innerHeight&&(h=t.clientY<window.innerHeight/2?0:this._maxY-window.innerHeight+20),this._startW>window.innerWidth&&(s=t.clientX<window.innerWidth/2?0:this._maxX-window.innerWidth+20),window.scrollTo(s,h)},_doResize:function(t){var i=void 0,e=void 0,o=void 0,n=void 0;"w"===this._resizeMode?(i=this._startX-t.pageX,this._leftPos-i<0&&(i=this._leftPos),(o=this._startW+i)<this._minW&&(i=(o=this._minW)-this._startW),this.resizeTo(o),this.moveTo(this._leftPos-i)):"e"===this._resizeMode?(i=t.pageX-this._startX,this._leftPos+this._startW+i>this._maxX&&(i=this._maxX-this._leftPos-this._startW),(o=this._startW+i)<this._minW&&(o=this._minW),this.resizeTo(o)):"n"===this._resizeMode?(e=this._startY-t.pageY,this._topPos-e<0&&(e=this._topPos),(n=this._startH+e)<this._minH&&(e=(n=this._minH)-this._startH),this.resizeTo(void 0,n),this.moveTo(void 0,this._topPos-e)):"s"===this._resizeMode?(e=t.pageY-this._startY,this._topPos+this._startH+e>this._maxY&&(e=this._maxY-this._topPos-this._startH),(n=this._startH+e)<this._minH&&(n=this._minH),this.resizeTo(void 0,n)):"nw"===this._resizeMode?(i=this._startX-t.pageX,e=this._startY-t.pageY,this._leftPos-i<0&&(i=this._leftPos),this._topPos-e<0&&(e=this._topPos),o=this._startW+i,n=this._startH+e,o<this._minW&&(i=(o=this._minW)-this._startW),n<this._minH&&(e=(n=this._minH)-this._startH),this.resizeTo(o,n),this.moveTo(this._leftPos-i,this._topPos-e)):"sw"===this._resizeMode?(i=this._startX-t.pageX,e=t.pageY-this._startY,this._leftPos-i<0&&(i=this._leftPos),this._topPos+this._startH+e>this._maxY&&(e=this._maxY-this._topPos-this._startH),o=this._startW+i,n=this._startH+e,o<this._minW&&(i=(o=this._minW)-this._startW),n<this._minH&&(n=this._minH),this.resizeTo(o,n),this.moveTo(this._leftPos-i)):"ne"===this._resizeMode?(i=t.pageX-this._startX,e=this._startY-t.pageY,this._leftPos+this._startW+i>this._maxX&&(i=this._maxX-this._leftPos-this._startW),this._topPos-e<0&&(e=this._topPos),o=this._startW+i,n=this._startH+e,o<this._minW&&(o=this._minW),n<this._minH&&(e=(n=this._minH)-this._startH),this.resizeTo(o,n),this.moveTo(void 0,this._topPos-e)):"se"===this._resizeMode&&(i=t.pageX-this._startX,e=t.pageY-this._startY,this._leftPos+this._startW+i>this._maxX&&(i=this._maxX-this._leftPos-this._startW),this._topPos+this._startH+e>this._maxY&&(e=this._maxY-this._topPos-this._startH),o=this._startW+i,n=this._startH+e,o<this._minW&&(o=this._minW),n<this._minH&&(n=this._minH),this.resizeTo(o,n)),this._setDialogContentSizing()},_logOnMouseMove:function(){this._log("_onMouseMove: "+(this._isDrag?" Drag":"")+(this._isResize?" resize=":"")+this._resizeMode+(this._isButton?" Button":""))},_onMouseMove:function(t){if((t=t||window.event)&&t.target){if(this._isDrag)this._doDrag(t);else if(this._isResize)this._doResize(t);else if(!this._isButton){var i=void 0,e="";if(t.target===this._dialog||t.target===this._dialogTitle||this._dialog.contains(t.target)){var o=this._getOffset(this._dialog);t.pageY<o.top+this._resizePixel?e="n":t.pageY>o.bottom-this._resizePixel&&(e="s"),t.pageX<o.left+this._resizePixel?e+="w":t.pageX>o.right-this._resizePixel&&(e+="e")}""!==e&&this._resizeMode!==e?("n"===e||"s"===e?i="ns-resize":"e"===e||"w"===e?i="ew-resize":"ne"===e||"sw"===e?i="nesw-resize":"nw"!==e&&"se"!==e||(i="nwse-resize"),this._setCursor(i),this._resizeMode=e):""===e&&""!==this._resizeMode&&(this._setCursor(""),this._resizeMode="")}if(this._logOnMouseMove(),this._isDrag||this._isResize||this._resizeMode||this._isButton)return this._suppressEvent(t)}},_logOnMouseUp:function(){this._log("_onMouseUp: "+(this._isDrag?" Drag":"")+(this._isResize?" resize=":"")+this._resizeMode+(this._isButton?" Button":""))},_onMouseUp:function(t){if(t=t||window.event,this._isDrag||this._isResize||this._resizeMode||this._isButton)return this._isDrag?(this._setCursor(""),this._isDrag=!1):this._isResize?(this._setCursor(""),this._isResize=!1,this._resizeMode=""):this._isButton&&(this._isButton=!1),this._logOnMouseUp(),this._removeContentCover(),this._suppressEvent(t)},_getOffset:function(t){var i=t.getBoundingClientRect(),e=window.scrollX||document.documentElement.scrollLeft,o=window.scrollY||document.documentElement.scrollTop;return{left:i.left+e,top:i.top+o,right:i.right+e,bottom:i.bottom+o}},_setCursor:function(t){this._dialog.style.cursor=t,this._dialogTitle.style.cursor=t},_setDialogContentSizing:function(){}},l.positions=h,l.alignments=s,i.exports={ToolWindow:l}},{"./config":2,"./positioners":3}]},{},[1]);